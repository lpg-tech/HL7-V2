{
  "resourceType": "ConceptMap",
  "id": "message-vxu-v04-to-bundle",
  "text": {
    "status": "extensions",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>MessageVXU_V04toBundle (http://hl7.org/fhir/uv/v2mappings/message-vxu-v04-to-bundle)</h2><p>Mapping from VXU_V04 to <a href=\"http://hl7.org/fhir/R4/bundle.html\">Bundle</a></p><p>ACTIVE (not intended for production usage). Published on 2022-02-21 by HL7 International, Inc (HL7 Orders and Observations Workgroup: <a href=\"http://hl7.org/Special/committees/orders/index.cfm\">http://hl7.org/Special/committ...</a>, Keith W. Boone: <a href=\"mailto:kboone@ainq.com\">kboone@ainq.com</a>). Copyright (c) 2020, HL7 International, Inc., All Rights Reserved.</p><div><p>This ConceptMap represents a mapping from the HL7 V2 Message VXU_V04 to the FHIR Message Bundle.</p>\n</div><br/><table class=\"grid\"><tr><td colspan=\"4\"><b>Source Concept Details</b></td><td><b>Relationship</b></td><td colspan=\"5\"><b>Destination Concept Details</b></td><td><b>Comment</b></td></tr><tr><td colspan=\"2\"><b>Code</b> from </td><td><b>Code</b> from </td><td><b>Code</b> from </td><td/><td colspan=\"2\"><b>Code</b> from </td><td><b>Code</b> from </td><td><b>Code</b> from </td><td><b>Code</b> from </td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.MSH</td><td style=\"border-left-width: 0px\">Message Header</td><td>MSH[Bundle]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Bundle</td><td style=\"border-left-width: 0px\">Bundle</td><td/><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.MSH</td><td style=\"border-left-width: 0px\">Message Header Segment</td><td>MSH[MessageHeader]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">MessageHeader[1]</td><td style=\"border-left-width: 0px\">MessageHeader[1]</td><td/><td/><td/><td>Processing of the MSH segment results in the creation of a new MessageHeader resource</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.MSH</td><td style=\"border-left-width: 0px\">Message Header Segment</td><td>MSH[Provenance]</td><td>Provenance.target=Bundle; Provenance.target=MessageHeader[MSH]</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Provenance[1]</td><td style=\"border-left-width: 0px\">Provenance[1]</td><td/><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.SFT</td><td style=\"border-left-width: 0px\">Software</td><td>SFT[MessageHeader]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">MessageHeader[1]</td><td style=\"border-left-width: 0px\">MessageHeader[1]</td><td/><td/><td/><td>Incorporate SFT content for each of the SFT instances into the MessageHeader created from the MSH segment.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PID</td><td style=\"border-left-width: 0px\">Patient Identification Segment</td><td>PID[Patient]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Patient[1]</td><td style=\"border-left-width: 0px\">Patient[1]</td><td/><td/><td/><td>Processing of the PID segment results in the creation of a new Patient resource</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PID</td><td style=\"border-left-width: 0px\">Patient Identification Segment</td><td>PID[Provenance]</td><td>Provenance.target.reference=Patient[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Provenance[4]</td><td style=\"border-left-width: 0px\">Provenance[4]</td><td>IF PID-33 AND PID-34 VALUED</td><td>One  may drop PID-33 from the condition if PID-34 Last Update Facility is still sufficient without a date.</td><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PD1</td><td style=\"border-left-width: 0px\">Additional Demographics</td><td>PD1[Patient]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Patient[1]</td><td style=\"border-left-width: 0px\">Patient[1]</td><td/><td/><td/><td>Incorporate PD1 content into the Patient created from the PID segment.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.NK1</td><td style=\"border-left-width: 0px\">Next of Kin/Associated Parties</td><td>NK1[RelatedPerson]</td><td>RelatedPerson.patient.reference=Patient[PID].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">RelatedPerson[1]</td><td style=\"border-left-width: 0px\">RelatedPerson[1]</td><td/><td/><td/><td>Typically, each NK1 will be translated to either a new RelatedPerson resource or added as a new occurrence of Patient.contact, but it's possible to insert the NK1 data into both structures.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.NK1</td><td style=\"border-left-width: 0px\">Next of Kin/Associated Parties</td><td>NK1[Patient]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Patient[1]</td><td style=\"border-left-width: 0px\">Patient[1]</td><td/><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PATIENT_VISIT.PV1</td><td style=\"border-left-width: 0px\">Patient Visit</td><td>PV1[Encounter]</td><td>Encounter.subject.reference=Patient[PID].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Encounter[1]</td><td style=\"border-left-width: 0px\">Encounter[1]</td><td/><td>Only if the system wants to know about the encounter related to the immunization event</td><td/><td>Processing of the PV1 segment results in the creation of a new Encounter resource</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PATIENT_VISIT.PV1</td><td style=\"border-left-width: 0px\">Patient Visit</td><td>PV1[Patient]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Patient[1]</td><td style=\"border-left-width: 0px\">Patient[1]</td><td/><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PATIENT_VISIT.PV2</td><td style=\"border-left-width: 0px\">Patient Visit – Additional Info</td><td>PV2[Encounter]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Encounter[1]</td><td style=\"border-left-width: 0px\">Encounter[1]</td><td/><td/><td/><td>Incorporate PV2 content into the Encounter created from the PV1 segment.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.OBX</td><td style=\"border-left-width: 0px\">Observation/Result</td><td>OBX[Observation]</td><td>Observation.subject.reference=Patient[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[1]</td><td style=\"border-left-width: 0px\">Observation[1]</td><td>IF OBX-5 LST.count LESS THAN OR EQUALS 1</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.OBX</td><td style=\"border-left-width: 0px\">Observation/Result</td><td>OBX[Observation-Component]</td><td>Observation.subject.reference=Patient[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[1]</td><td style=\"border-left-width: 0px\">Observation[1]</td><td>IF OBX-5 LST.count GREATER THAN 1</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[Device]</td><td>Observation[1].device.reference=Device.id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Device[1]</td><td style=\"border-left-width: 0px\">Device[1]</td><td>IF PRT-10 VALUED</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[Observation-Location]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[1]</td><td style=\"border-left-width: 0px\">Observation[1]</td><td>IF PRT-9 VALUED OR IF PRT-14 VALUED</td><td/><td/><td>At this time we don't know of a use case for sending a location PRT to a patient level observations. We've provided a mapping from PRT to Location but not way to link it to other resources in the Bundle. If there is a known use case, please comment on it so that we can develop a solution.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[PractitionerRole]</td><td>Observation.performer.reference=PractitionerRole[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">PractitionerRole[1]</td><td style=\"border-left-width: 0px\">PractitionerRole[1]</td><td>IF PRT-5 VALUED</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.PERSON_OBSERVATION.NTE</td><td style=\"border-left-width: 0px\">Notes (Regarding Patient Observation)</td><td>NTE[Annotation]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[1].note</td><td style=\"border-left-width: 0px\">Observation[1].note</td><td/><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.ORC</td><td style=\"border-left-width: 0px\">Common Order</td><td>ORC[Immunization]</td><td>Immunzation.patient.reference=Patient[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1]</td><td style=\"border-left-width: 0px\">Immunization[1]</td><td/><td/><td/><td>Processing of each ORC segment results in the creation of a new Immunization resource</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.ORC</td><td style=\"border-left-width: 0px\">Common Order</td><td>ORC[ServiceRequest]</td><td>ServiceRequest.subject.reference=Patient[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">ServiceRequest[1]</td><td style=\"border-left-width: 0px\">ServiceRequest[1]</td><td/><td>Only if the system wants to know about the order that lead to the immunization event</td><td/><td>Processing of each ORC segment results in the creation of a new ServiceRequest resource if the receiving system wants to know about the order that lead to the immunization event</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td>PRT[PractitionerRole]</td><td>Immunization.performer.actor.reference=PractitionerRole[2].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">PractitionerRole[2]</td><td style=\"border-left-width: 0px\">PractitionerRole[2]</td><td>IF PRT-4.1 EQUALS &quot;OP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;OP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td>Processing of each PRT segment typically results in the creation of a new Practitioner or PractitionerRole resource. \n\nThe decision between creating a Practitioner or PractitionerRole resource may depend on the availability of data related to the practitioner's role elsewhere in the message.\n\nIt may be possible to reuse a Practitioner resource in the bundle created from somewhere else in the bundle rather than creating a new resource for each PRT segment (eg, the same administering practictioner resource could be pointed to from multiple order segment groups) - if an implementer decides to do this, the system must be certain that it's the same person (same name, ID, etc) potentially even playing the same role (if the bundle uses PractitionerRole in addition to Practitioner).\\</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td/><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1].performer.function.coding.code</td><td style=\"border-left-width: 0px\">= &quot;OP'&quot;</td><td>IF PRT-4.1 EQUALS &quot;OP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;OP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td/><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1].performer.function.coding.system</td><td style=\"border-left-width: 0px\">= &quot;http://terminology.hl7.org/CodeSystem/v2-0443&quot;</td><td>IF PRT-4.1 EQUALS &quot;OP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;OP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td>PRT[PractitionerRole]</td><td>Immunization.performer.actor.reference=PractitionerRole[3].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">PractitionerRole[3]</td><td style=\"border-left-width: 0px\">PractitionerRole[3]</td><td>IF PRT-4.1 EQUALS &quot;AP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;AP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td/><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1].performer.function.coding.code</td><td style=\"border-left-width: 0px\">= &quot;AP'&quot;</td><td>IF PRT-4.1 EQUALS &quot;AP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;AP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.PRT</td><td style=\"border-left-width: 0px\">Participation (for ORC)</td><td/><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1].performer.function.coding.system</td><td style=\"border-left-width: 0px\">= &quot;http://terminology.hl7.org/CodeSystem/v2-0443&quot;</td><td>IF PRT-4.1 EQUALS &quot;AP&quot; AND PRT-4.3 EQUALS &quot;HL70443&quot;</td><td/><td>(element(&quot;4.1&quot;)=&quot;AP&quot;)and(element(&quot;4.3&quot;)=&quot;HL70443&quot;)</td><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.RXA</td><td style=\"border-left-width: 0px\">Pharmacy Administration Segment</td><td>RXA[Immunization]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1]</td><td style=\"border-left-width: 0px\">Immunization[1]</td><td/><td/><td/><td>Incorporate RXA content into the Immunization created from the ORC segment in the same segment group.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.RXR</td><td style=\"border-left-width: 0px\">Pharmacy Route</td><td>RXR[Immunization]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Immunization[1]</td><td style=\"border-left-width: 0px\">Immunization[1]</td><td/><td/><td/><td>Incorporate RXR content into the Immunization created from the ORC segment in the same segment group.</td></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.OBX</td><td style=\"border-left-width: 0px\">Observation/Result</td><td>OBX[Observation]</td><td>Observation.subject.reference=Patient[1].id; Observation.partOf.reference=Immunization[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[2]</td><td style=\"border-left-width: 0px\">Observation[2]</td><td>IF OBX-5 LST.count LESS THAN OR EQUALS 1</td><td>Some observations about the immunization may map to elements within the Immuniation resource rather than an independent Observation resource. For example, funding source, patient eligibility and educational material are often sent as OBX segments but map to Immunization elements.  Specific guidance on how to map, e.g., the US CDC implementation guide on immunizations, will be provided separately at a future time TBD.</td><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.OBX</td><td style=\"border-left-width: 0px\">Observation/Result</td><td>OBX[Observation-Component]</td><td>Observation.subject.reference=Patient[1].id; Observation.partOf.reference=Immunization[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[2]</td><td style=\"border-left-width: 0px\">Observation[2]</td><td>IF OBX-5 LST.count GREATER THAN 1</td><td>Some observations about the immunization may map to elements within the Immuniation resource rather than an independent Observation resource. For example, funding source, patient eligibility and educational material are often sent as OBX segments but map to Immunization elements.  Specific guidance on how to map, e.g., the US CDC implementation guide on immunizations, will be provided separately at a future time TBD.</td><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[Device]</td><td>Observation[1].device.reference=Device.id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Device[2]</td><td style=\"border-left-width: 0px\">Device[2]</td><td>IF PRT-10 VALUED</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[Observation-Location]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[2]</td><td style=\"border-left-width: 0px\">Observation[2]</td><td>IF PRT-9 VALUED OR IF PRT-14 VALUED</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.PRT</td><td style=\"border-left-width: 0px\">Participation (for Observation)</td><td>PRT[PractitionerRole]</td><td>Observation.performer.reference=PractitionerRole[1].id</td><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">PractitionerRole[4]</td><td style=\"border-left-width: 0px\">PractitionerRole[4]</td><td>IF PRT-5 VALUED</td><td/><td/><td/></tr><tr><td style=\"border-right-width: 0px\">VXU_V04.ORDER.OBSERVATION.NTE</td><td style=\"border-left-width: 0px\">Notes (Regarding Immunization)</td><td>NTE[Annotation]</td><td/><td><a href=\"http://hl7.org/fhir/R4/codesystem-concept-map-equivalence.html#equivalent\">is equivalent to</a></td><td style=\"border-right-width: 0px\">Observation[2].note</td><td style=\"border-left-width: 0px\">Observation[2].note</td><td/><td/><td/><td/></tr></table></div>"
  },
  "extension": [
    {
      "extension": [
        {
          "url": "type",
          "valueCode": "derived-from"
        },
        {
          "url": "label",
          "valueString": "Message VXU:V04 to Bundle.fsh"
        },
        {
          "url": "url",
          "valueUri": "https://docs.google.com/spreadsheets/d/1_7maXDpc_qMMRzMm0x6d90-Hj6vvhGyO2kyFX0tpuZs/edit#gid=0"
        }
      ],
      "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/RelatedArtifact"
    }
  ],
  "url": "http://hl7.org/fhir/uv/v2mappings/message-vxu-v04-to-bundle",
  "version": "0.1.0",
  "name": "MessageVXU_V04toBundle",
  "status": "active",
  "experimental": true,
  "date": "2022-02-21",
  "publisher": "HL7 International, Inc",
  "contact": [
    {
      "name": "HL7 Orders and Observations Workgroup",
      "telecom": [
        {
          "system": "url",
          "value": "http://hl7.org/Special/committees/orders/index.cfm"
        }
      ]
    },
    {
      "name": "Keith W. Boone",
      "telecom": [
        {
          "system": "email",
          "value": "kboone@ainq.com"
        }
      ]
    }
  ],
  "description": "This ConceptMap represents a mapping from the HL7 V2 Message VXU_V04 to the FHIR Message Bundle.",
  "jurisdiction": [
    {
      "coding": [
        {
          "system": "http://unstats.un.org/unsd/methods/m49/m49.htm",
          "code": "001"
        }
      ]
    }
  ],
  "copyright": "Copyright (c) 2020, HL7 International, Inc., All Rights Reserved.",
  "sourceUri": "VXU_V04",
  "targetUri": "Bundle",
  "group": [
    {
      "element": [
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.MSH",
          "display": "Message Header",
          "target": [
            {
              "code": "Bundle",
              "display": "Bundle",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[Bundle]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.MSH",
          "display": "Message Header Segment",
          "target": [
            {
              "code": "MessageHeader[1]",
              "display": "MessageHeader[1]",
              "equivalence": "equivalent",
              "comment": "Processing of the MSH segment results in the creation of a new MessageHeader resource",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[MessageHeader]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.MSH",
          "display": "Message Header Segment",
          "target": [
            {
              "code": "Provenance[1]",
              "display": "Provenance[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "MSH[Provenance]"
                },
                {
                  "property": "references",
                  "value": "Provenance.target=Bundle; Provenance.target=MessageHeader[MSH]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.SFT",
          "display": "Software",
          "target": [
            {
              "code": "MessageHeader[1]",
              "display": "MessageHeader[1]",
              "equivalence": "equivalent",
              "comment": "Incorporate SFT content for each of the SFT instances into the MessageHeader created from the MSH segment.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "SFT[MessageHeader]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PID",
          "display": "Patient Identification Segment",
          "target": [
            {
              "code": "Patient[1]",
              "display": "Patient[1]",
              "equivalence": "equivalent",
              "comment": "Processing of the PID segment results in the creation of a new Patient resource",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PID[Patient]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PID",
          "display": "Patient Identification Segment",
          "target": [
            {
              "code": "Provenance[4]",
              "display": "Provenance[4]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PID[Provenance]"
                },
                {
                  "property": "references",
                  "value": "Provenance.target.reference=Patient[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PID-33 AND PID-34 VALUED"
                },
                {
                  "property": "narrative",
                  "value": "One  may drop PID-33 from the condition if PID-34 Last Update Facility is still sufficient without a date."
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PD1",
          "display": "Additional Demographics",
          "target": [
            {
              "code": "Patient[1]",
              "display": "Patient[1]",
              "equivalence": "equivalent",
              "comment": "Incorporate PD1 content into the Patient created from the PID segment.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PD1[Patient]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.NK1",
          "display": "Next of Kin/Associated Parties",
          "target": [
            {
              "code": "RelatedPerson[1]",
              "display": "RelatedPerson[1]",
              "equivalence": "equivalent",
              "comment": "Typically, each NK1 will be translated to either a new RelatedPerson resource or added as a new occurrence of Patient.contact, but it's possible to insert the NK1 data into both structures.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "NK1[RelatedPerson]"
                },
                {
                  "property": "references",
                  "value": "RelatedPerson.patient.reference=Patient[PID].id"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.NK1",
          "display": "Next of Kin/Associated Parties",
          "target": [
            {
              "code": "Patient[1]",
              "display": "Patient[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "NK1[Patient]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PATIENT_VISIT.PV1",
          "display": "Patient Visit",
          "target": [
            {
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "equivalence": "equivalent",
              "comment": "Processing of the PV1 segment results in the creation of a new Encounter resource",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PV1[Encounter]"
                },
                {
                  "property": "references",
                  "value": "Encounter.subject.reference=Patient[PID].id"
                }
              ],
              "product": [
                {
                  "property": "narrative",
                  "value": "Only if the system wants to know about the encounter related to the immunization event"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PATIENT_VISIT.PV1",
          "display": "Patient Visit",
          "target": [
            {
              "code": "Patient[1]",
              "display": "Patient[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PV1[Patient]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PATIENT_VISIT.PV2",
          "display": "Patient Visit – Additional Info",
          "target": [
            {
              "code": "Encounter[1]",
              "display": "Encounter[1]",
              "equivalence": "equivalent",
              "comment": "Incorporate PV2 content into the Encounter created from the PV1 segment.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PV2[Encounter]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.OBX",
          "display": "Observation/Result",
          "target": [
            {
              "code": "Observation[1]",
              "display": "Observation[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[Observation]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF OBX-5 LST.count LESS THAN OR EQUALS 1"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.OBX",
          "display": "Observation/Result",
          "target": [
            {
              "code": "Observation[1]",
              "display": "Observation[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[Observation-Component]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF OBX-5 LST.count GREATER THAN 1"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "Device[1]",
              "display": "Device[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[Device]"
                },
                {
                  "property": "references",
                  "value": "Observation[1].device.reference=Device.id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-10 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "Observation[1]",
              "display": "Observation[1]",
              "equivalence": "equivalent",
              "comment": "At this time we don't know of a use case for sending a location PRT to a patient level observations. We've provided a mapping from PRT to Location but not way to link it to other resources in the Bundle. If there is a known use case, please comment on it so that we can develop a solution.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[Observation-Location]"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-9 VALUED OR IF PRT-14 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "PractitionerRole[1]",
              "display": "PractitionerRole[1]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[PractitionerRole]"
                },
                {
                  "property": "references",
                  "value": "Observation.performer.reference=PractitionerRole[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-5 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.PERSON_OBSERVATION.NTE",
          "display": "Notes (Regarding Patient Observation)",
          "target": [
            {
              "code": "Observation[1].note",
              "display": "Observation[1].note",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "NTE[Annotation]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.ORC",
          "display": "Common Order",
          "target": [
            {
              "code": "Immunization[1]",
              "display": "Immunization[1]",
              "equivalence": "equivalent",
              "comment": "Processing of each ORC segment results in the creation of a new Immunization resource",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "ORC[Immunization]"
                },
                {
                  "property": "references",
                  "value": "Immunzation.patient.reference=Patient[1].id"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.ORC",
          "display": "Common Order",
          "target": [
            {
              "code": "ServiceRequest[1]",
              "display": "ServiceRequest[1]",
              "equivalence": "equivalent",
              "comment": "Processing of each ORC segment results in the creation of a new ServiceRequest resource if the receiving system wants to know about the order that lead to the immunization event",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "ORC[ServiceRequest]"
                },
                {
                  "property": "references",
                  "value": "ServiceRequest.subject.reference=Patient[1].id"
                }
              ],
              "product": [
                {
                  "property": "narrative",
                  "value": "Only if the system wants to know about the order that lead to the immunization event"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "PractitionerRole[2]",
              "display": "PractitionerRole[2]",
              "equivalence": "equivalent",
              "comment": "Processing of each PRT segment typically results in the creation of a new Practitioner or PractitionerRole resource. \n\nThe decision between creating a Practitioner or PractitionerRole resource may depend on the availability of data related to the practitioner's role elsewhere in the message.\n\nIt may be possible to reuse a Practitioner resource in the bundle created from somewhere else in the bundle rather than creating a new resource for each PRT segment (eg, the same administering practictioner resource could be pointed to from multiple order segment groups) - if an implementer decides to do this, the system must be certain that it's the same person (same name, ID, etc) potentially even playing the same role (if the bundle uses PractitionerRole in addition to Practitioner).\\",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[PractitionerRole]"
                },
                {
                  "property": "references",
                  "value": "Immunization.performer.actor.reference=PractitionerRole[2].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"OP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"OP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "Immunization[1].performer.function.coding.code",
              "display": "= \"OP'\"",
              "equivalence": "equivalent",
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"OP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"OP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "Immunization[1].performer.function.coding.system",
              "display": "= \"http://terminology.hl7.org/CodeSystem/v2-0443\"",
              "equivalence": "equivalent",
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"OP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"OP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "PractitionerRole[3]",
              "display": "PractitionerRole[3]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[PractitionerRole]"
                },
                {
                  "property": "references",
                  "value": "Immunization.performer.actor.reference=PractitionerRole[3].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"AP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"AP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "Immunization[1].performer.function.coding.code",
              "display": "= \"AP'\"",
              "equivalence": "equivalent",
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"AP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"AP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.PRT",
          "display": "Participation (for ORC)",
          "target": [
            {
              "code": "Immunization[1].performer.function.coding.system",
              "display": "= \"http://terminology.hl7.org/CodeSystem/v2-0443\"",
              "equivalence": "equivalent",
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-4.1 EQUALS \"AP\" AND PRT-4.3 EQUALS \"HL70443\""
                },
                {
                  "property": "fhirpath",
                  "value": "(element(\"4.1\")=\"AP\")and(element(\"4.3\")=\"HL70443\")"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.RXA",
          "display": "Pharmacy Administration Segment",
          "target": [
            {
              "code": "Immunization[1]",
              "display": "Immunization[1]",
              "equivalence": "equivalent",
              "comment": "Incorporate RXA content into the Immunization created from the ORC segment in the same segment group.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "RXA[Immunization]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.RXR",
          "display": "Pharmacy Route",
          "target": [
            {
              "code": "Immunization[1]",
              "display": "Immunization[1]",
              "equivalence": "equivalent",
              "comment": "Incorporate RXR content into the Immunization created from the ORC segment in the same segment group.",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "RXR[Immunization]"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.OBX",
          "display": "Observation/Result",
          "target": [
            {
              "code": "Observation[2]",
              "display": "Observation[2]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[Observation]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id; Observation.partOf.reference=Immunization[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF OBX-5 LST.count LESS THAN OR EQUALS 1"
                },
                {
                  "property": "narrative",
                  "value": "Some observations about the immunization may map to elements within the Immuniation resource rather than an independent Observation resource. For example, funding source, patient eligibility and educational material are often sent as OBX segments but map to Immunization elements.  Specific guidance on how to map, e.g., the US CDC implementation guide on immunizations, will be provided separately at a future time TBD."
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 1
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": 1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.OBX",
          "display": "Observation/Result",
          "target": [
            {
              "code": "Observation[2]",
              "display": "Observation[2]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "OBX[Observation-Component]"
                },
                {
                  "property": "references",
                  "value": "Observation.subject.reference=Patient[1].id; Observation.partOf.reference=Immunization[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF OBX-5 LST.count GREATER THAN 1"
                },
                {
                  "property": "narrative",
                  "value": "Some observations about the immunization may map to elements within the Immuniation resource rather than an independent Observation resource. For example, funding source, patient eligibility and educational material are often sent as OBX segments but map to Immunization elements.  Specific guidance on how to map, e.g., the US CDC implementation guide on immunizations, will be provided separately at a future time TBD."
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "Device[2]",
              "display": "Device[2]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[Device]"
                },
                {
                  "property": "references",
                  "value": "Observation[1].device.reference=Device.id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-10 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "Observation[2]",
              "display": "Observation[2]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[Observation-Location]"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-9 VALUED OR IF PRT-14 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.PRT",
          "display": "Participation (for Observation)",
          "target": [
            {
              "code": "PractitionerRole[4]",
              "display": "PractitionerRole[4]",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "PRT[PractitionerRole]"
                },
                {
                  "property": "references",
                  "value": "Observation.performer.reference=PractitionerRole[1].id"
                }
              ],
              "product": [
                {
                  "property": "antlr",
                  "value": "IF PRT-5 VALUED"
                }
              ]
            }
          ]
        },
        {
          "extension": [
            {
              "extension": [
                {
                  "url": "cardinalityMin",
                  "valueInteger": 0
                },
                {
                  "url": "cardinalityMax",
                  "valueInteger": -1
                }
              ],
              "url": "http://hl7.org/fhir/uv/v2mappings/StructureDefinition/TypeInfo"
            }
          ],
          "code": "VXU_V04.ORDER.OBSERVATION.NTE",
          "display": "Notes (Regarding Immunization)",
          "target": [
            {
              "code": "Observation[2].note",
              "display": "Observation[2].note",
              "equivalence": "equivalent",
              "dependsOn": [
                {
                  "property": "segment-map",
                  "value": "NTE[Annotation]"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}